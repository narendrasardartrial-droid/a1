{% extends 'base.html' %}
{% block title %}{{ student.first_name }} {{ student.last_name }} - Profile{% endblock %}
{% load static %}

{% block content %}
<div class="container mt-5">
  <div class="card shadow-lg p-4">
    <div class="row">
      <!-- Profile Picture -->
      <div class="col-md-4 text-center">
        {% if student.profile_picture %}
  <img src="{{ student.profile_picture.url }}"
       class="img-fluid shadow"
       style="width: 200px; height: 200px; object-fit: cover;"
       alt="{{ student.first_name }} {{ student.last_name }}">
{% else %}
  <img src="{% static 'images/default-profile.png' %}"
       class="img-fluid shadow"
       style="width: 200px; height: 200px; object-fit: cover;"
       alt="Default Profile Picture">
{% endif %}

        <h4 class="mt-3">{{ student.first_name }} {{ student.last_name }}</h4>
        <p class="text-muted">{{ student.enrollment_no }}</p>
      </div>

      <!-- Student Details -->
      <div class="col-md-8">
        <h5 class="mb-3">Student Information</h5>
        <table class="table table-bordered">
          <tr>
            <th>Email</th>
            <td>{{ student.email }}</td>
          </tr>
          <tr>
            <th>Phone</th>
            <td>{{ student.phone|default:"N/A" }}</td>
          </tr>
          <tr>
            <th>Department</th>
            <td>{{ student.department.name }}</td>
          </tr>
          <tr>
            <th>Semester</th>
            <td>Semester {{ student.semester }}</td>
          </tr>
          <tr>
            <th>Date of Birth</th>
            <td>{{ student.date_of_birth|date:"d M Y" }}</td>
          </tr>
          <tr>
            <th>Address</th>
            <td>{{ student.address|default:"N/A" }}</td>
          </tr>
          <tr>
            <th>Date Joined</th>
            <td>{{ student.date_joined|date:"d M Y" }}</td>
          </tr>
        </table>

        <!-- Subjects -->
        <h5 class="mt-4">Assigned Subjects</h5>
        <ul class="list-group">
          {% for subj in subjects %}
            <li class="list-group-item">{{ subj.name }} (Sem {{ subj.semester }}, {{ subj.department.code }})</li>
          {% empty %}
            <li class="list-group-item text-muted">No subjects assigned</li>
          {% endfor %}
        </ul>
      </div>
    </div>
  </div>
</div>
{% endblock %}
